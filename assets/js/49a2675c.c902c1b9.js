"use strict";(globalThis.webpackChunkk_8_s_security=globalThis.webpackChunkk_8_s_security||[]).push([[2982],{6497(e,r,n){n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>l,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"best-practices/cluster-setup-and-hardening/rbac-and-identity/rback","title":"rback","description":"rback generates visual diagrams of Kubernetes RBAC configurations, making it easier to understand and audit complex permission structures.","source":"@site/docs/best-practices/cluster-setup-and-hardening/rbac-and-identity/rback.md","sourceDirName":"best-practices/cluster-setup-and-hardening/rbac-and-identity","slug":"/best-practices/cluster-setup-and-hardening/rbac-and-identity/rback","permalink":"/kubernetes-security/best-practices/cluster-setup-and-hardening/rbac-and-identity/rback","draft":false,"unlisted":false,"editUrl":"https://github.com/geek-kb/k8s_security/edit/main/docs/best-practices/cluster-setup-and-hardening/rbac-and-identity/rback.md","tags":[{"inline":true,"label":"tool","permalink":"/kubernetes-security/tags/tool"},{"inline":true,"label":"rbac","permalink":"/kubernetes-security/tags/rbac"},{"inline":true,"label":"authorization","permalink":"/kubernetes-security/tags/authorization"},{"inline":true,"label":"CKS","permalink":"/kubernetes-security/tags/cks"}],"version":"current","lastUpdatedBy":"Itai Ganot","lastUpdatedAt":1771236448000,"sidebarPosition":17,"frontMatter":{"sidebar_position":17,"title":"rback","description":"rback generates visual diagrams of Kubernetes RBAC configurations, making it easier to understand and audit complex permission structures.","keywords":["kubernetes security tool","rback","RBAC visualization","rbac diagram","kubernetes authorization","access control visualization","security audit","graphviz","CKS"],"tags":["tool","rbac","authorization","CKS"],"related":["/kubernetes-security/best-practices/cluster-setup-and-hardening/rbac-and-identity/insecure-rbac-permissions-mitigation/","/kubernetes-security/fundamentals/authorization/rbac/","/kubernetes-security/best-practices/cluster-setup-and-hardening/rbac-and-identity/rakkess/"]},"sidebar":"default","previous":{"title":"rakkess","permalink":"/kubernetes-security/best-practices/cluster-setup-and-hardening/rbac-and-identity/rakkess"},"next":{"title":"kubectl-bindrole","permalink":"/kubernetes-security/best-practices/cluster-setup-and-hardening/rbac-and-identity/kubectl-bindrole"}}');var i=n(4848),t=n(8453);const a={sidebar_position:17,title:"rback",description:"rback generates visual diagrams of Kubernetes RBAC configurations, making it easier to understand and audit complex permission structures.",keywords:["kubernetes security tool","rback","RBAC visualization","rbac diagram","kubernetes authorization","access control visualization","security audit","graphviz","CKS"],tags:["tool","rbac","authorization","CKS"],related:["/kubernetes-security/best-practices/cluster-setup-and-hardening/rbac-and-identity/insecure-rbac-permissions-mitigation/","/kubernetes-security/fundamentals/authorization/rbac/","/kubernetes-security/best-practices/cluster-setup-and-hardening/rbac-and-identity/rakkess/"]},l="rback",c={},d=[{value:"Use Cases",id:"use-cases",level:2},{value:"Installation",id:"installation",level:2},{value:"Usage Examples",id:"usage-examples",level:2},{value:"Generate RBAC Diagram for Current Cluster",id:"generate-rbac-diagram-for-current-cluster",level:3},{value:"Generate Diagram for a Specific Namespace",id:"generate-diagram-for-a-specific-namespace",level:3},{value:"Generate SVG Output (Better for Large Diagrams)",id:"generate-svg-output-better-for-large-diagrams",level:3},{value:"Filter by Specific Resources",id:"filter-by-specific-resources",level:3},{value:"Generate PDF Output",id:"generate-pdf-output",level:3},{value:"Understanding the Diagram",id:"understanding-the-diagram",level:2},{value:"Node Types",id:"node-types",level:3},{value:"Edge Types",id:"edge-types",level:3},{value:"Example Diagram Elements",id:"example-diagram-elements",level:3},{value:"Advanced Usage",id:"advanced-usage",level:2},{value:"Filter to Show Only ClusterRoleBindings",id:"filter-to-show-only-clusterrolebindings",level:3},{value:"Combine with jq for Filtering",id:"combine-with-jq-for-filtering",level:3},{value:"Generate Diagrams for Multiple Namespaces",id:"generate-diagrams-for-multiple-namespaces",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Limitations",id:"limitations",level:2},{value:"References",id:"references",level:2}];function o(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"rback",children:"rback"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"rback"})," is a tool that generates visual diagrams of Kubernetes RBAC configurations. It produces graphs showing the relationships between Roles, ClusterRoles, RoleBindings, ClusterRoleBindings, ServiceAccounts, Users, and Groups. These visualizations make it easier to understand complex RBAC structures and identify potential security issues."]}),"\n",(0,i.jsx)(r.p,{children:"The tool outputs DOT format files that can be rendered using Graphviz or similar tools."}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"use-cases",children:"Use Cases"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Visualize complex RBAC configurations for security reviews."}),"\n",(0,i.jsx)(r.li,{children:"Document RBAC structures for compliance and audit purposes."}),"\n",(0,i.jsx)(r.li,{children:"Identify unexpected permission relationships."}),"\n",(0,i.jsx)(r.li,{children:"Onboard new team members by providing visual RBAC documentation."}),"\n",(0,i.jsx)(r.li,{children:"Debug RBAC issues by seeing the full permission chain."}),"\n"]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"installation",children:"Installation"}),"\n",(0,i.jsx)(r.p,{children:"Install rback from GitHub releases:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"curl -LO https://github.com/team-soteria/rback/releases/download/v0.4.0/rback-linux-amd64.tar.gz\ntar xzf rback-linux-amd64.tar.gz\nchmod +x rback\nsudo mv rback /usr/local/bin/\n"})}),"\n",(0,i.jsx)(r.p,{children:"For macOS:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"curl -LO https://github.com/team-soteria/rback/releases/download/v0.4.0/rback-darwin-amd64.tar.gz\ntar xzf rback-darwin-amd64.tar.gz\nchmod +x rback\nsudo mv rback /usr/local/bin/\n"})}),"\n",(0,i.jsx)(r.p,{children:"Graphviz is required to render the output:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"# Ubuntu/Debian\nsudo apt-get install graphviz\n\n# macOS\nbrew install graphviz\n\n# RHEL/CentOS\nsudo yum install graphviz\n"})}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"usage-examples",children:"Usage Examples"}),"\n",(0,i.jsx)(r.h3,{id:"generate-rbac-diagram-for-current-cluster",children:"Generate RBAC Diagram for Current Cluster"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"kubectl get sa,roles,rolebindings,clusterroles,clusterrolebindings -A -o yaml | rback > rbac.dot\ndot -Tpng rbac.dot -o rbac.png\n"})}),"\n",(0,i.jsx)(r.h3,{id:"generate-diagram-for-a-specific-namespace",children:"Generate Diagram for a Specific Namespace"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"kubectl get sa,roles,rolebindings -n production -o yaml | rback > production-rbac.dot\ndot -Tpng production-rbac.dot -o production-rbac.png\n"})}),"\n",(0,i.jsx)(r.h3,{id:"generate-svg-output-better-for-large-diagrams",children:"Generate SVG Output (Better for Large Diagrams)"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"kubectl get sa,roles,rolebindings,clusterroles,clusterrolebindings -A -o yaml | rback > rbac.dot\ndot -Tsvg rbac.dot -o rbac.svg\n"})}),"\n",(0,i.jsx)(r.h3,{id:"filter-by-specific-resources",children:"Filter by Specific Resources"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"# Only show specific service accounts\nkubectl get sa my-sa -n production -o yaml | rback > sa-rbac.dot\n"})}),"\n",(0,i.jsx)(r.h3,{id:"generate-pdf-output",children:"Generate PDF Output"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"kubectl get sa,roles,rolebindings,clusterroles,clusterrolebindings -A -o yaml | rback > rbac.dot\ndot -Tpdf rbac.dot -o rbac.pdf\n"})}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"understanding-the-diagram",children:"Understanding the Diagram"}),"\n",(0,i.jsx)(r.p,{children:"rback generates graphs with the following elements:"}),"\n",(0,i.jsx)(r.h3,{id:"node-types",children:"Node Types"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Shape"}),(0,i.jsx)(r.th,{children:"Color"}),(0,i.jsx)(r.th,{children:"Represents"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Ellipse"}),(0,i.jsx)(r.td,{children:"Green"}),(0,i.jsx)(r.td,{children:"ServiceAccount"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Ellipse"}),(0,i.jsx)(r.td,{children:"Yellow"}),(0,i.jsx)(r.td,{children:"User"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Ellipse"}),(0,i.jsx)(r.td,{children:"Orange"}),(0,i.jsx)(r.td,{children:"Group"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Rectangle"}),(0,i.jsx)(r.td,{children:"Blue"}),(0,i.jsx)(r.td,{children:"Role/ClusterRole"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Diamond"}),(0,i.jsx)(r.td,{children:"Purple"}),(0,i.jsx)(r.td,{children:"RoleBinding/ClusterRoleBinding"})]})]})]}),"\n",(0,i.jsx)(r.h3,{id:"edge-types",children:"Edge Types"}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Edge"}),(0,i.jsx)(r.th,{children:"Meaning"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Subject -> Binding"}),(0,i.jsx)(r.td,{children:"Subject is bound to this binding"})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:"Binding -> Role"}),(0,i.jsx)(r.td,{children:"Binding references this role"})]})]})]}),"\n",(0,i.jsx)(r.h3,{id:"example-diagram-elements",children:"Example Diagram Elements"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"ServiceAccount (green) --\x3e RoleBinding (diamond) --\x3e Role (blue)\n                                                      |\n                                                      v\n                                              [permissions list]\n"})}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"advanced-usage",children:"Advanced Usage"}),"\n",(0,i.jsx)(r.h3,{id:"filter-to-show-only-clusterrolebindings",children:"Filter to Show Only ClusterRoleBindings"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"kubectl get clusterroles,clusterrolebindings -o yaml | rback > cluster-rbac.dot\n"})}),"\n",(0,i.jsx)(r.h3,{id:"combine-with-jq-for-filtering",children:"Combine with jq for Filtering"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"# Show only bindings for a specific subject\nkubectl get rolebindings,clusterrolebindings -A -o json | \\\n  jq '.items[] | select(.subjects[]?.name == \"my-service-account\")' | \\\n  kubectl get -f - -o yaml | rback > filtered-rbac.dot\n"})}),"\n",(0,i.jsx)(r.h3,{id:"generate-diagrams-for-multiple-namespaces",children:"Generate Diagrams for Multiple Namespaces"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"for ns in production staging development; do\n  kubectl get sa,roles,rolebindings -n $ns -o yaml | rback > $ns-rbac.dot\n  dot -Tpng $ns-rbac.dot -o $ns-rbac.png\ndone\n"})}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Regular visualization:"})," Generate RBAC diagrams regularly and compare against previous versions to detect changes."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Namespace separation:"})," Create separate diagrams for each namespace to reduce complexity."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Use SVG for large clusters:"})," SVG format allows zooming and searching in large diagrams."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Document in wikis:"})," Include generated diagrams in security documentation and runbooks."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Combine with auditing:"})," Use alongside kubectl-who-can and rakkess for comprehensive RBAC analysis."]}),"\n"]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"limitations",children:"Limitations"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Large clusters may produce very complex diagrams that are difficult to read."}),"\n",(0,i.jsx)(r.li,{children:"Does not evaluate effective permissions; shows only configuration."}),"\n",(0,i.jsx)(r.li,{children:"Requires Graphviz to be installed for rendering."}),"\n",(0,i.jsx)(r.li,{children:"Does not show aggregated ClusterRoles in detail."}),"\n"]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"references",children:"References"}),"\n",(0,i.jsx)(r.p,{children:"This article is based on information from the following official sources:"}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.a,{href:"https://github.com/team-soteria/rback",children:"rback GitHub Repository"})," - GitHub"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.a,{href:"https://kubernetes.io/docs/reference/access-authn-authz/rbac/",children:"Using RBAC Authorization"})," - Kubernetes Documentation"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.a,{href:"https://graphviz.org/documentation/",children:"Graphviz Documentation"})," - Graphviz"]}),"\n"]})]})}function u(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},8453(e,r,n){n.d(r,{R:()=>a,x:()=>l});var s=n(6540);const i={},t=s.createContext(i);function a(e){const r=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(t.Provider,{value:r},e.children)}}}]);
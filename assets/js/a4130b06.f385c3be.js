"use strict";(globalThis.webpackChunkk_8_s_security=globalThis.webpackChunkk_8_s_security||[]).push([[5644],{3428(e,i,n){n.r(i),n.d(i,{assets:()=>o,contentTitle:()=>c,default:()=>u,frontMatter:()=>l,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"best-practices/cluster-setup-and-hardening/network-security/cilium","title":"Cilium","description":"Cilium is an eBPF-powered Kubernetes networking, security, and observability solution that enables high-performance and fine-grained control over cluster communications.","source":"@site/docs/best-practices/cluster-setup-and-hardening/network-security/cilium.md","sourceDirName":"best-practices/cluster-setup-and-hardening/network-security","slug":"/best-practices/cluster-setup-and-hardening/network-security/cilium","permalink":"/kubernetes-security/best-practices/cluster-setup-and-hardening/network-security/cilium","draft":false,"unlisted":false,"editUrl":"https://github.com/geek-kb/k8s_security/edit/main/docs/best-practices/cluster-setup-and-hardening/network-security/cilium.md","tags":[],"version":"current","lastUpdatedBy":"Itai Ganot","lastUpdatedAt":1771236448000,"sidebarPosition":11,"frontMatter":{"title":"Cilium","description":"Cilium is an eBPF-powered Kubernetes networking, security, and observability solution that enables high-performance and fine-grained control over cluster communications.","sidebar_position":11,"keywords":["kubernetes security tool","cilium","eBPF","CNI plugin","network policies","service mesh","kubernetes networking","layer 7 security","observability","CKS"]},"sidebar":"default","previous":{"title":"kube-hunter","permalink":"/kubernetes-security/best-practices/cluster-setup-and-hardening/network-security/kube-hunter"},"next":{"title":"Calico","permalink":"/kubernetes-security/best-practices/cluster-setup-and-hardening/network-security/calico"}}');var r=n(4848),t=n(8453);const l={title:"Cilium",description:"Cilium is an eBPF-powered Kubernetes networking, security, and observability solution that enables high-performance and fine-grained control over cluster communications.",sidebar_position:11,keywords:["kubernetes security tool","cilium","eBPF","CNI plugin","network policies","service mesh","kubernetes networking","layer 7 security","observability","CKS"]},c="Cilium",o={},a=[{value:"Usage",id:"usage",level:2},{value:"1. Install Cilium",id:"1-install-cilium",level:3},{value:"2. Define Network Policies with Cilium",id:"2-define-network-policies-with-cilium",level:3},{value:"3. Enable Transparent Encryption",id:"3-enable-transparent-encryption",level:3},{value:"4. Observe Network Flows",id:"4-observe-network-flows",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Resources",id:"resources",level:2},{value:"References",id:"references",level:2}];function d(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.header,{children:(0,r.jsx)(i.h1,{id:"cilium",children:"Cilium"})}),"\n",(0,r.jsx)(i.p,{children:(0,r.jsx)(i.strong,{children:"Required knowledge for the CKS certification."})}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Cilium"})," is an advanced ",(0,r.jsx)(i.strong,{children:"networking, security, and observability"})," platform for Kubernetes that leverages ",(0,r.jsx)(i.strong,{children:"eBPF"})," (Extended Berkeley Packet Filter) to provide ",(0,r.jsx)(i.strong,{children:"high-performance networking"}),", ",(0,r.jsx)(i.strong,{children:"transparent encryption"}),", ",(0,r.jsx)(i.strong,{children:"network policies"}),", and ",(0,r.jsx)(i.strong,{children:"deep visibility"})," into traffic flows."]}),"\n",(0,r.jsx)(i.p,{children:"It replaces traditional kube-proxy, CNI plugins, and service meshes with a modern, programmable data plane that integrates tightly with Kubernetes."}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsx)(i.h2,{id:"usage",children:"Usage"}),"\n",(0,r.jsx)(i.h3,{id:"1-install-cilium",children:"1. Install Cilium"}),"\n",(0,r.jsx)(i.p,{children:"Use the Cilium CLI to install it into your cluster:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"cilium install\n"})}),"\n",(0,r.jsx)(i.p,{children:"Check Cilium status:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"cilium status\n"})}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsx)(i.h3,{id:"2-define-network-policies-with-cilium",children:"2. Define Network Policies with Cilium"}),"\n",(0,r.jsx)(i.p,{children:"Example: Allow only frontend pods to access the backend."}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-yaml",children:"apiVersion: cilium.io/v2\nkind: CiliumNetworkPolicy\nmetadata:\n  name: allow-frontend\nspec:\n  endpointSelector:\n    matchLabels:\n      app: backend\n  ingress:\n    - fromEndpoints:\n        - matchLabels:\n            app: frontend\n"})}),"\n",(0,r.jsx)(i.p,{children:"Apply the policy:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"kubectl apply -f allow-frontend.yaml\n"})}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsx)(i.h3,{id:"3-enable-transparent-encryption",children:"3. Enable Transparent Encryption"}),"\n",(0,r.jsx)(i.p,{children:"Enable encryption between nodes using WireGuard or IPsec:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"cilium config set enable-ipsec true\n"})}),"\n",(0,r.jsx)(i.p,{children:"Or using Helm:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"helm upgrade cilium cilium/cilium --set encryption.enabled=true\n"})}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsx)(i.h3,{id:"4-observe-network-flows",children:"4. Observe Network Flows"}),"\n",(0,r.jsx)(i.p,{children:"Use Hubble, Cilium's observability engine:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-bash",children:"cilium hubble enable\ncilium hubble ui\n"})}),"\n",(0,r.jsx)(i.p,{children:"You can visualize:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Service-to-service communication"}),"\n",(0,r.jsx)(i.li,{children:"DNS queries"}),"\n",(0,r.jsx)(i.li,{children:"Allowed/denied flows"}),"\n",(0,r.jsx)(i.li,{children:"Identity and label-based flows"}),"\n"]}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsx)(i.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["Replace ",(0,r.jsx)(i.strong,{children:"kube-proxy"})," with Cilium to simplify architecture and reduce latency."]}),"\n",(0,r.jsxs)(i.li,{children:["Use ",(0,r.jsx)(i.strong,{children:"identity-aware network policies"})," for more granular control than standard Kubernetes ",(0,r.jsx)(i.code,{children:"NetworkPolicy"}),"."]}),"\n",(0,r.jsxs)(i.li,{children:["Enable ",(0,r.jsx)(i.strong,{children:"Hubble"})," to monitor and audit all traffic and security events."]}),"\n",(0,r.jsxs)(i.li,{children:["Use ",(0,r.jsx)(i.strong,{children:"transparent encryption"})," to secure node-to-node traffic with zero changes to workloads."]}),"\n",(0,r.jsx)(i.li,{children:"Regularly test your policies using Cilium\u2019s connectivity test suite."}),"\n"]}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsx)(i.h2,{id:"resources",children:"Resources"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Official Documentation:"})," ",(0,r.jsx)(i.a,{href:"https://docs.cilium.io",children:"https://docs.cilium.io"})]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Cilium GitHub Repository:"})," ",(0,r.jsx)(i.a,{href:"https://github.com/cilium/cilium",children:"https://github.com/cilium/cilium"})]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Policy Examples:"})," ",(0,r.jsx)(i.a,{href:"https://docs.cilium.io/en/stable/policy/language/",children:"https://docs.cilium.io/en/stable/policy/language/"})]}),"\n"]}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsx)(i.h2,{id:"references",children:"References"}),"\n",(0,r.jsx)(i.p,{children:"This article is based on information from the following official sources:"}),"\n",(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.a,{href:"https://docs.cilium.io/en/stable/",children:"Cilium Documentation"})," - Cilium Project (CNCF)"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.a,{href:"https://kubernetes.io/docs/concepts/services-networking/network-policies/",children:"Network Policies"})," - Kubernetes Documentation"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.a,{href:"https://docs.cilium.io/en/stable/security/policy/",children:"Cilium Network Policy"})," - Cilium Project (CNCF)"]}),"\n"]})]})}function u(e={}){const{wrapper:i}={...(0,t.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453(e,i,n){n.d(i,{R:()=>l,x:()=>c});var s=n(6540);const r={},t=s.createContext(r);function l(e){const i=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function c(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(t.Provider,{value:i},e.children)}}}]);
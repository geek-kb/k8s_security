"use strict";(globalThis.webpackChunkk_8_s_security=globalThis.webpackChunkk_8_s_security||[]).push([[2627],{8453(e,n,s){s.d(n,{R:()=>o,x:()=>a});var i=s(6540);const r={},t=i.createContext(r);function o(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(t.Provider,{value:n},e.children)}},9013(e,n,s){s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"best_practices/cluster_setup_and_hardening/pod_security/pod_sandboxing","title":"Pod Sandboxing","description":"Learn how pod sandboxing enhances security by isolating workloads in Kubernetes.","source":"@site/docs/best_practices/cluster_setup_and_hardening/pod_security/pod_sandboxing.md","sourceDirName":"best_practices/cluster_setup_and_hardening/pod_security","slug":"/best_practices/cluster_setup_and_hardening/pod_security/pod_sandboxing","permalink":"/docs/best_practices/cluster_setup_and_hardening/pod_security/pod_sandboxing","draft":false,"unlisted":false,"editUrl":"https://github.com/geek-kb/k8s_security/edit/main/docs/best_practices/cluster_setup_and_hardening/pod_security/pod_sandboxing.md","tags":[],"version":"current","lastUpdatedBy":"Itai Ganot","lastUpdatedAt":1765581437000,"sidebarPosition":5,"frontMatter":{"title":"Pod Sandboxing","sidebar_position":5,"description":"Learn how pod sandboxing enhances security by isolating workloads in Kubernetes.","keywords":["kubernetes security best practices","pod sandboxing","workload isolation","gvisor","kata containers","container runtime","security isolation","CKS"]},"sidebar":"default","previous":{"title":"Securing Kubernetes CSI Drivers","permalink":"/docs/best_practices/cluster_setup_and_hardening/pod_security/csi_driver_mitigation"},"next":{"title":"Pod Security Standards (PSS)","permalink":"/docs/best_practices/cluster_setup_and_hardening/pod_security/pod_security_standards"}}');var r=s(4848),t=s(8453);const o={title:"Pod Sandboxing",sidebar_position:5,description:"Learn how pod sandboxing enhances security by isolating workloads in Kubernetes.",keywords:["kubernetes security best practices","pod sandboxing","workload isolation","gvisor","kata containers","container runtime","security isolation","CKS"]},a="Pod Sandboxing in Kubernetes",d={},c=[{value:"What is Pod Sandboxing?",id:"what-is-pod-sandboxing",level:2},{value:"Why Use Pod Sandboxing?",id:"why-use-pod-sandboxing",level:2},{value:"Approaches to Pod Sandboxing",id:"approaches-to-pod-sandboxing",level:2},{value:"1. Kata Containers",id:"1-kata-containers",level:3},{value:"Example: Deploying a Pod with Kata Containers",id:"example-deploying-a-pod-with-kata-containers",level:4},{value:"2. gVisor",id:"2-gvisor",level:3},{value:"Example: Deploying a Pod with gVisor",id:"example-deploying-a-pod-with-gvisor",level:4},{value:"3. Firecracker",id:"3-firecracker",level:3},{value:"4. Using RuntimeClass for Sandboxing",id:"4-using-runtimeclass-for-sandboxing",level:3},{value:"Best Practices for Pod Sandboxing",id:"best-practices-for-pod-sandboxing",level:2},{value:"Related Security Features",id:"related-security-features",level:2},{value:"Conclusion",id:"conclusion",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"pod-sandboxing-in-kubernetes",children:"Pod Sandboxing in Kubernetes"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Required knowledge for the CKS certification."})}),"\n",(0,r.jsx)(n.h2,{id:"what-is-pod-sandboxing",children:"What is Pod Sandboxing?"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Pod sandboxing"})," is a security technique that enhances ",(0,r.jsx)(n.strong,{children:"isolation"})," between workloads running in Kubernetes. It reduces the risk of ",(0,r.jsx)(n.strong,{children:"container breakout attacks"}),", ensures ",(0,r.jsx)(n.strong,{children:"stronger multi-tenancy"}),", and limits the impact of ",(0,r.jsx)(n.strong,{children:"compromised pods"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["In a standard Kubernetes environment, pods share the ",(0,r.jsx)(n.strong,{children:"underlying kernel"})," of the host system. Pod sandboxing introduces ",(0,r.jsx)(n.strong,{children:"additional layers of isolation"}),", preventing malicious workloads from impacting the host or other workloads."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"why-use-pod-sandboxing",children:"Why Use Pod Sandboxing?"}),"\n",(0,r.jsx)(n.p,{children:"Pod sandboxing is particularly useful in the following scenarios:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Multi-Tenancy:"})," Running workloads from different users or teams on shared clusters."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"High-Security Workloads:"})," Protecting sensitive applications from compromise."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Zero Trust Architectures:"})," Restricting access between workloads and enforcing strict security policies."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["By using pod sandboxing, organizations can ",(0,r.jsx)(n.strong,{children:"prevent privilege escalation"}),", ",(0,r.jsx)(n.strong,{children:"reduce attack surfaces"}),", and ",(0,r.jsx)(n.strong,{children:"improve workload security"}),"."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"approaches-to-pod-sandboxing",children:"Approaches to Pod Sandboxing"}),"\n",(0,r.jsx)(n.h3,{id:"1-kata-containers",children:"1. Kata Containers"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Required knowledge for the CKS certification."})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://katacontainers.io/",children:"Kata Containers"})," provide ",(0,r.jsx)(n.strong,{children:"hardware-virtualized isolation"})," by running each pod inside a lightweight virtual machine (VM). This creates an extra security boundary between the workload and the host."]}),"\n",(0,r.jsx)(n.h4,{id:"example-deploying-a-pod-with-kata-containers",children:"Example: Deploying a Pod with Kata Containers"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'apiVersion: v1\nkind: Pod\nmetadata:\n  name: kata-pod\n  annotations:\n    io.kubernetes.cri.untrusted-workload: "true"\nspec:\n  runtimeClassName: kata-containers\n  containers:\n    - name: app-container\n      image: nginx\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Benefits:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Provides ",(0,r.jsx)(n.strong,{children:"VM-level isolation"})," while maintaining Kubernetes compatibility."]}),"\n",(0,r.jsxs)(n.li,{children:["Ideal for running ",(0,r.jsx)(n.strong,{children:"untrusted workloads"})," in ",(0,r.jsx)(n.strong,{children:"multi-tenant environments"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"2-gvisor",children:"2. gVisor"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Required knowledge for the CKS certification."})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://gvisor.dev/",children:"gVisor"})," is a ",(0,r.jsx)(n.strong,{children:"user-space kernel"})," designed to sandbox workloads by intercepting and handling syscalls in a controlled environment."]}),"\n",(0,r.jsx)(n.h4,{id:"example-deploying-a-pod-with-gvisor",children:"Example: Deploying a Pod with gVisor"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"apiVersion: v1\nkind: Pod\nmetadata:\n  name: gvisor-pod\nspec:\n  runtimeClassName: gvisor\n  containers:\n    - name: app-container\n      image: nginx\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Benefits:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Runs applications in a ",(0,r.jsx)(n.strong,{children:"highly restricted user-space kernel"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Limits the ",(0,r.jsx)(n.strong,{children:"attack surface"})," by preventing direct host kernel access."]}),"\n",(0,r.jsxs)(n.li,{children:["Ideal for ",(0,r.jsx)(n.strong,{children:"lightweight sandboxing"})," with minimal performance impact."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"3-firecracker",children:"3. Firecracker"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://firecracker-microvm.github.io/",children:"Firecracker"})," is a lightweight ",(0,r.jsx)(n.strong,{children:"microVM"})," technology designed for ",(0,r.jsx)(n.strong,{children:"serverless computing"})," and ",(0,r.jsx)(n.strong,{children:"secure container execution"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key Features:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Provides ",(0,r.jsx)(n.strong,{children:"strong isolation"})," using ",(0,r.jsx)(n.strong,{children:"KVM-based microVMs"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Used by services like ",(0,r.jsx)(n.strong,{children:"AWS Lambda"})," and ",(0,r.jsx)(n.strong,{children:"Fargate"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Optimized for ",(0,r.jsx)(n.strong,{children:"fast startup times"})," and ",(0,r.jsx)(n.strong,{children:"low resource overhead"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Firecracker-based runtimes, such as ",(0,r.jsx)(n.strong,{children:"AWS Firecracker-containerd"}),", can be integrated into Kubernetes for ",(0,r.jsx)(n.strong,{children:"secure multi-tenant workloads"}),"."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"4-using-runtimeclass-for-sandboxing",children:"4. Using RuntimeClass for Sandboxing"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Required knowledge for the CKS certification."})}),"\n",(0,r.jsxs)(n.p,{children:["Kubernetes allows selecting ",(0,r.jsx)(n.strong,{children:"different runtimes"})," for workloads using ",(0,r.jsx)(n.code,{children:"RuntimeClass"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"apiVersion: node.k8s.io/v1\nkind: RuntimeClass\nmetadata:\n  name: sandboxed\nhandler: kata-containers\n"})}),"\n",(0,r.jsxs)(n.p,{children:["By associating pods with a specific ",(0,r.jsx)(n.code,{children:"RuntimeClass"}),", Kubernetes can enforce ",(0,r.jsx)(n.strong,{children:"sandboxed execution environments"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"apiVersion: v1\nkind: Pod\nmetadata:\n  name: sandboxed-pod\nspec:\n  runtimeClassName: sandboxed\n  containers:\n    - name: secure-container\n      image: alpine\n"})}),"\n",(0,r.jsxs)(n.p,{children:["This method ensures that workloads requiring ",(0,r.jsx)(n.strong,{children:"extra isolation"})," can run securely without affecting the host."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"best-practices-for-pod-sandboxing",children:"Best Practices for Pod Sandboxing"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Use Kata Containers or Firecracker"})," for workloads requiring ",(0,r.jsx)(n.strong,{children:"strong hardware isolation"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Deploy gVisor for lightweight syscall filtering"})," and restricted execution."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Limit pod privileges"})," using ",(0,r.jsx)(n.strong,{children:"Pod Security Standards (PSS)"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Combine pod sandboxing with seccomp and AppArmor"})," for defense-in-depth security."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:["Use ",(0,r.jsx)(n.code,{children:"RuntimeClass"})," to enforce sandboxed execution"]})," where necessary."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"related-security-features",children:"Related Security Features"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/best_practices/cluster_setup_and_hardening/pod_security/seccomp_in_pods",children:"Seccomp Profiles"})})," restrict system calls to limit attack vectors."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/best_practices/cluster_setup_and_hardening/pod_security/app_armor_profiles",children:"AppArmor Profiles"})})," define mandatory access control for pods."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.a,{href:"/docs/best_practices/cluster_setup_and_hardening/pod_security/pod_security_standards",children:"Pod Security Standards"})})," enforce security policies at the namespace level."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,r.jsxs)(n.p,{children:["Pod sandboxing is an essential technique for securing ",(0,r.jsx)(n.strong,{children:"multi-tenant Kubernetes clusters"})," and ",(0,r.jsx)(n.strong,{children:"high-security workloads"}),". By leveraging technologies like ",(0,r.jsx)(n.strong,{children:"Kata Containers, gVisor, and Firecracker"}),", organizations can ",(0,r.jsx)(n.strong,{children:"reduce the risk of container breakouts"}),", **limit exposure to host reso"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}}}]);
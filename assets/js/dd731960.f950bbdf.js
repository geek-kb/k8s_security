"use strict";(globalThis.webpackChunkk_8_s_security=globalThis.webpackChunkk_8_s_security||[]).push([[1413],{8453(e,n,s){s.d(n,{R:()=>r,x:()=>o});var i=s(6540);const a={},t=i.createContext(a);function r(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),i.createElement(t.Provider,{value:n},e.children)}},9405(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"best_practices/cluster_setup_and_hardening/network_security/exposed_dashboard_mitigation","title":"Exposed Kubernetes Dashboard Mitigation","description":"Techniques and configuration examples to prevent unauthorized access to the Kubernetes Dashboard.","source":"@site/docs/best_practices/cluster_setup_and_hardening/network_security/exposed_dashboard_mitigation.md","sourceDirName":"best_practices/cluster_setup_and_hardening/network_security","slug":"/best_practices/cluster_setup_and_hardening/network_security/exposed_dashboard_mitigation","permalink":"/docs/best_practices/cluster_setup_and_hardening/network_security/exposed_dashboard_mitigation","draft":false,"unlisted":false,"editUrl":"https://github.com/geek-kb/k8s_security/edit/main/docs/best_practices/cluster_setup_and_hardening/network_security/exposed_dashboard_mitigation.md","tags":[],"version":"current","lastUpdatedBy":"Itai Ganot","lastUpdatedAt":1770102262000,"sidebarPosition":5,"frontMatter":{"sidebar_position":5,"title":"Exposed Kubernetes Dashboard Mitigation","description":"Techniques and configuration examples to prevent unauthorized access to the Kubernetes Dashboard.","keywords":["kubernetes security best practices","kubernetes dashboard","dashboard security","authentication","authorization","RBAC","ingress security","TLS encryption","kubectl proxy","CKS"]},"sidebar":"default","previous":{"title":"Egress Control in Kubernetes","permalink":"/docs/best_practices/cluster_setup_and_hardening/network_security/egress_control"},"next":{"title":"Ingress Security","permalink":"/docs/best_practices/cluster_setup_and_hardening/network_security/ingress_security"}}');var a=s(4848),t=s(8453);const r={sidebar_position:5,title:"Exposed Kubernetes Dashboard Mitigation",description:"Techniques and configuration examples to prevent unauthorized access to the Kubernetes Dashboard.",keywords:["kubernetes security best practices","kubernetes dashboard","dashboard security","authentication","authorization","RBAC","ingress security","TLS encryption","kubectl proxy","CKS"]},o="Exposed Kubernetes Dashboard Mitigation",c={},d=[{value:"1. Restrict Network Access",id:"1-restrict-network-access",level:2},{value:"Recommendation",id:"recommendation",level:3},{value:"Example: Restrict Access with a NetworkPolicy",id:"example-restrict-access-with-a-networkpolicy",level:3},{value:"2. Enforce Authentication and Avoid Static Tokens",id:"2-enforce-authentication-and-avoid-static-tokens",level:2},{value:"Recommendation",id:"recommendation-1",level:3},{value:"Example: Kubeconfig With ServiceAccount Token",id:"example-kubeconfig-with-serviceaccount-token",level:3},{value:"3. Limit Permissions with Least Privilege",id:"3-limit-permissions-with-least-privilege",level:2},{value:"Recommendation",id:"recommendation-2",level:3},{value:"Example: RoleBinding for Read-Only Access",id:"example-rolebinding-for-read-only-access",level:3},{value:"4. Disable the Dashboard in Production (If Unused)",id:"4-disable-the-dashboard-in-production-if-unused",level:2},{value:"Recommendation",id:"recommendation-3",level:3},{value:"Example: Uninstall Dashboard",id:"example-uninstall-dashboard",level:3},{value:"5. Audit Dashboard Access and Usage",id:"5-audit-dashboard-access-and-usage",level:2},{value:"Recommendation",id:"recommendation-4",level:3},{value:"Example: Audit Policy to Capture Dashboard Access",id:"example-audit-policy-to-capture-dashboard-access",level:3},{value:"Summary",id:"summary",level:2},{value:"References",id:"references",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"exposed-kubernetes-dashboard-mitigation",children:"Exposed Kubernetes Dashboard Mitigation"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Required knowledge for the CKS certification."})}),"\n",(0,a.jsx)(n.p,{children:"The Kubernetes Dashboard can become a serious security liability when exposed to the public internet without proper access control, authentication, and least-privilege configuration."}),"\n",(0,a.jsx)(n.p,{children:"This guide outlines practical steps and examples to harden the Dashboard and reduce the attack surface in Kubernetes clusters."}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"1-restrict-network-access",children:"1. Restrict Network Access"}),"\n",(0,a.jsx)(n.p,{children:"The Dashboard should only be accessible from trusted sources such as internal networks or specific bastion hosts."}),"\n",(0,a.jsx)(n.h3,{id:"recommendation",children:"Recommendation"}),"\n",(0,a.jsxs)(n.p,{children:["Avoid exposing the Dashboard with public-facing services like ",(0,a.jsx)(n.code,{children:"NodePort"}),", ",(0,a.jsx)(n.code,{children:"LoadBalancer"}),", or an unauthenticated Ingress."]}),"\n",(0,a.jsx)(n.h3,{id:"example-restrict-access-with-a-networkpolicy",children:"Example: Restrict Access with a NetworkPolicy"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"apiVersion: networking.k8s.io/v1\nkind: NetworkPolicy\nmetadata:\n  name: restrict-dashboard-access\n  namespace: kubernetes-dashboard\nspec:\n  podSelector:\n    matchLabels:\n      k8s-app: kubernetes-dashboard\n  ingress:\n    - from:\n        - ipBlock:\n            cidr: 10.0.0.0/16 # Your internal CIDR\n  policyTypes:\n    - Ingress\n"})}),"\n",(0,a.jsx)(n.p,{children:"This ensures that only pods from the specified CIDR can access the Dashboard."}),"\n",(0,a.jsxs)(n.p,{children:["If using a cloud provider, restrict access at the ",(0,a.jsx)(n.strong,{children:"security group or firewall level"})," as well."]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"2-enforce-authentication-and-avoid-static-tokens",children:"2. Enforce Authentication and Avoid Static Tokens"}),"\n",(0,a.jsxs)(n.p,{children:["The Dashboard should not be exposed with unrestricted access or static ",(0,a.jsx)(n.code,{children:"cluster-admin"})," tokens."]}),"\n",(0,a.jsx)(n.h3,{id:"recommendation-1",children:"Recommendation"}),"\n",(0,a.jsx)(n.p,{children:"Use a secure authentication method like OIDC or a short-lived ServiceAccount token via kubeconfig."}),"\n",(0,a.jsx)(n.h3,{id:"example-kubeconfig-with-serviceaccount-token",children:"Example: Kubeconfig With ServiceAccount Token"}),"\n",(0,a.jsx)(n.p,{children:"Generate a kubeconfig for Dashboard login:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"TOKEN=$(kubectl -n kubernetes-dashboard create token dashboard-sa)\n\nkubectl config set-credentials dashboard-user --token=$TOKEN\nkubectl config set-context dashboard-context --cluster=<cluster-name> --user=dashboard-user\nkubectl config use-context dashboard-context\n"})}),"\n",(0,a.jsx)(n.p,{children:"Avoid reusing or sharing this token across environments. Use RBAC to scope permissions."}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"3-limit-permissions-with-least-privilege",children:"3. Limit Permissions with Least Privilege"}),"\n",(0,a.jsxs)(n.p,{children:["Avoid binding the Dashboard\u2019s service account to the ",(0,a.jsx)(n.code,{children:"cluster-admin"})," role."]}),"\n",(0,a.jsx)(n.h3,{id:"recommendation-2",children:"Recommendation"}),"\n",(0,a.jsx)(n.p,{children:"Create a dedicated service account with namespace-scoped read-only access."}),"\n",(0,a.jsx)(n.h3,{id:"example-rolebinding-for-read-only-access",children:"Example: RoleBinding for Read-Only Access"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'apiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: dashboard-reader\n  namespace: kubernetes-dashboard\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: Role\nmetadata:\n  namespace: kubernetes-dashboard\n  name: dashboard-view\nrules:\n  - apiGroups: [""]\n    resources: ["pods", "services", "configmaps"]\n    verbs: ["get", "list"]\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: RoleBinding\nmetadata:\n  name: dashboard-binding\n  namespace: kubernetes-dashboard\nsubjects:\n  - kind: ServiceAccount\n    name: dashboard-reader\n    namespace: kubernetes-dashboard\nroleRef:\n  kind: Role\n  name: dashboard-view\n  apiGroup: rbac.authorization.k8s.io\n'})}),"\n",(0,a.jsx)(n.p,{children:"This ensures the Dashboard has limited visibility and cannot mutate resources or access cluster-wide secrets."}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"4-disable-the-dashboard-in-production-if-unused",children:"4. Disable the Dashboard in Production (If Unused)"}),"\n",(0,a.jsx)(n.p,{children:"The Dashboard is not required in most production environments and can be removed entirely."}),"\n",(0,a.jsx)(n.h3,{id:"recommendation-3",children:"Recommendation"}),"\n",(0,a.jsx)(n.p,{children:"Disable it via your cluster provisioning tool (e.g., kubeadm, Helm, EKS addons, etc.)."}),"\n",(0,a.jsx)(n.h3,{id:"example-uninstall-dashboard",children:"Example: Uninstall Dashboard"}),"\n",(0,a.jsxs)(n.p,{children:["If deployed via ",(0,a.jsx)(n.code,{children:"kubectl apply"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"kubectl delete namespace kubernetes-dashboard\n"})}),"\n",(0,a.jsx)(n.p,{children:"If installed with Helm:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"helm uninstall kubernetes-dashboard -n kubernetes-dashboard\n"})}),"\n",(0,a.jsx)(n.p,{children:"Only re-enable it in isolated, tightly-controlled environments (e.g., air-gapped clusters or secured test environments)."}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"5-audit-dashboard-access-and-usage",children:"5. Audit Dashboard Access and Usage"}),"\n",(0,a.jsx)(n.p,{children:"Audit logs should be enabled to detect access to the Dashboard, especially if it is exposed via a proxy or Ingress."}),"\n",(0,a.jsx)(n.h3,{id:"recommendation-4",children:"Recommendation"}),"\n",(0,a.jsxs)(n.p,{children:["Enable API server auditing and monitor the ",(0,a.jsx)(n.code,{children:"userAgent"})," and ",(0,a.jsx)(n.code,{children:"impersonatedUser"})," fields."]}),"\n",(0,a.jsx)(n.h3,{id:"example-audit-policy-to-capture-dashboard-access",children:"Example: Audit Policy to Capture Dashboard Access"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'apiVersion: audit.k8s.io/v1\nkind: Policy\nrules:\n  - level: Metadata\n    users: ["system:serviceaccount:kubernetes-dashboard:dashboard-reader"]\n    verbs: ["get", "list", "create"]\n    resources:\n      - group: "" # core API group\n        resources: ["pods", "services", "configmaps"]\n'})}),"\n",(0,a.jsxs)(n.p,{children:["Configure this in the ",(0,a.jsx)(n.code,{children:"--audit-policy-file"})," flag of the API server."]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,a.jsx)(n.p,{children:"To prevent Kubernetes Dashboard exploitation:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Do not expose the Dashboard publicly or via insecure services."}),"\n",(0,a.jsx)(n.li,{children:"Require authentication and avoid using long-lived or admin-level tokens."}),"\n",(0,a.jsx)(n.li,{children:"Use RBAC to apply least-privilege permissions."}),"\n",(0,a.jsx)(n.li,{children:"Disable the Dashboard entirely in production if not needed."}),"\n",(0,a.jsx)(n.li,{children:"Enable auditing to track its usage and detect abuse."}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"These defensive layers collectively reduce the likelihood and impact of an exposed Dashboard in any environment."}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,a.jsx)(n.p,{children:"This article is based on information from the following official sources:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"https://github.com/kubernetes/dashboard",children:"Kubernetes Dashboard"})," - Kubernetes Dashboard Project"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"https://kubernetes.io/docs/tasks/access-application-cluster/web-ui-dashboard/",children:"Accessing Kubernetes Dashboard"})," - Kubernetes Documentation"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"https://kubernetes.io/docs/reference/access-authn-authz/rbac/",children:"Using RBAC Authorization"})," - Kubernetes Documentation"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/services-networking/network-policies/",children:"Network Policies"})," - Kubernetes Documentation"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}}}]);
"use strict";(globalThis.webpackChunkk_8_s_security=globalThis.webpackChunkk_8_s_security||[]).push([[7421],{3146(e,t,n){n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>c,default:()=>d,frontMatter:()=>a,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"best_practices/cluster_setup_and_hardening/node_security/kubelet_security","title":"Kubelet Security Overview","description":"Overview of Kubernetes Kubelet security covering authentication, authorization, TLS, resource limits, and hardening best practices.","source":"@site/docs/best_practices/cluster_setup_and_hardening/node_security/kubelet_security.md","sourceDirName":"best_practices/cluster_setup_and_hardening/node_security","slug":"/best_practices/cluster_setup_and_hardening/node_security/kubelet_security","permalink":"/docs/best_practices/cluster_setup_and_hardening/node_security/kubelet_security","draft":false,"unlisted":false,"editUrl":"https://github.com/geek-kb/k8s_security/edit/main/docs/best_practices/cluster_setup_and_hardening/node_security/kubelet_security.md","tags":[{"inline":true,"label":"best-practice","permalink":"/docs/tags/best-practice"},{"inline":true,"label":"node-security","permalink":"/docs/tags/node-security"},{"inline":true,"label":"kubelet","permalink":"/docs/tags/kubelet"},{"inline":true,"label":"CKS","permalink":"/docs/tags/cks"}],"version":"current","lastUpdatedBy":"Itai Ganot","lastUpdatedAt":1770658335000,"sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Kubelet Security Overview","description":"Overview of Kubernetes Kubelet security covering authentication, authorization, TLS, resource limits, and hardening best practices.","keywords":["kubernetes security best practices","kubelet security","node security","kubelet configuration","kubelet hardening","CIS kubernetes","kubernetes node hardening","CKS"],"tags":["best-practice","node-security","kubelet","CKS"],"related":["/docs/best_practices/cluster_setup_and_hardening/node_security/kubelet_authentication/","/docs/attack_vectors/kubelet_anonymous_auth/","/docs/attack_vectors/exposed_kubelet_api/"]},"sidebar":"default","previous":{"title":"netchecks","permalink":"/docs/best_practices/cluster_setup_and_hardening/network_security/netchecks"},"next":{"title":"Changed Block Tracking for Volume Snapshots","permalink":"/docs/best_practices/cluster_setup_and_hardening/node_security/changed_block_tracking"}}');var i=n(4848),r=n(8453);const a={sidebar_position:1,title:"Kubelet Security Overview",description:"Overview of Kubernetes Kubelet security covering authentication, authorization, TLS, resource limits, and hardening best practices.",keywords:["kubernetes security best practices","kubelet security","node security","kubelet configuration","kubelet hardening","CIS kubernetes","kubernetes node hardening","CKS"],tags:["best-practice","node-security","kubelet","CKS"],related:["/docs/best_practices/cluster_setup_and_hardening/node_security/kubelet_authentication/","/docs/attack_vectors/kubelet_anonymous_auth/","/docs/attack_vectors/exposed_kubelet_api/"]},c="Kubelet Security Overview",l={},o=[{value:"Key Risks of an Insecure Kubelet",id:"key-risks-of-an-insecure-kubelet",level:2},{value:"1. Authentication and Authorization",id:"1-authentication-and-authorization",level:2},{value:"2. Enforce TLS Encryption",id:"2-enforce-tls-encryption",level:2},{value:"3. Disable Read-Only Port",id:"3-disable-read-only-port",level:2},{value:"4. Limit Resource Consumption",id:"4-limit-resource-consumption",level:2},{value:"5. Enable Protect Kernel Defaults",id:"5-enable-protect-kernel-defaults",level:2},{value:"6. Rotate Certificates Automatically",id:"6-rotate-certificates-automatically",level:2},{value:"7. Regularly Update and Patch",id:"7-regularly-update-and-patch",level:2},{value:"Security Checklist",id:"security-checklist",level:2},{value:"References",id:"references",level:2}];function u(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"kubelet-security-overview",children:"Kubelet Security Overview"})}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Required knowledge for the CKS certification."})}),"\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.strong,{children:"Kubelet"})," is a critical component of a Kubernetes node, responsible for managing containers and ensuring that workloads run as expected. Since it has direct control over the node's container runtime and API interactions, securing the Kubelet is essential to prevent unauthorized access and mitigate security risks."]}),"\n",(0,i.jsxs)(t.p,{children:["This article provides an overview of kubelet security areas. For detailed authentication and authorization configuration, see ",(0,i.jsx)(t.a,{href:"/docs/best_practices/cluster_setup_and_hardening/node_security/kubelet_authentication/",children:"Securing Kubelet Authentication and Authorization"}),"."]}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h2,{id:"key-risks-of-an-insecure-kubelet",children:"Key Risks of an Insecure Kubelet"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Node Compromise:"})," If an attacker gains control over a Kubelet, they can access running pods, host resources, and secrets stored on the node."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Cluster-wide Exposure:"})," Improperly secured Kubelets can be used to escalate privileges across the Kubernetes cluster."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"API Exploits:"})," The Kubelet exposes an API that, if not properly configured, allows unauthorized command execution and data access."]}),"\n"]}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h2,{id:"1-authentication-and-authorization",children:"1. Authentication and Authorization"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Issue:"})," The kubelet API may allow anonymous access or grant excessive permissions to authenticated users.",(0,i.jsx)("br",{}),"\n",(0,i.jsx)(t.strong,{children:"Fix:"})," Disable anonymous authentication and enable webhook authorization."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-yaml",children:"apiVersion: kubelet.config.k8s.io/v1beta1\nkind: KubeletConfiguration\nauthentication:\n  anonymous:\n    enabled: false\n  webhook:\n    enabled: true\nauthorization:\n  mode: Webhook\n"})}),"\n",(0,i.jsxs)(t.p,{children:["For detailed configuration including certificate setup and RBAC rules, see:\n\u27a1 ",(0,i.jsx)(t.a,{href:"/docs/best_practices/cluster_setup_and_hardening/node_security/kubelet_authentication/",children:"Securing Kubelet Authentication and Authorization"})]}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h2,{id:"2-enforce-tls-encryption",children:"2. Enforce TLS Encryption"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Issue:"})," Unencrypted communication with the Kubelet can expose sensitive data.",(0,i.jsx)("br",{}),"\n",(0,i.jsx)(t.strong,{children:"Fix:"})," Require TLS for all Kubelet API interactions."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-yaml",children:"apiVersion: kubelet.config.k8s.io/v1beta1\nkind: KubeletConfiguration\nserverTLSBootstrap: true\ntlsCertFile: /var/lib/kubelet/pki/kubelet.crt\ntlsPrivateKeyFile: /var/lib/kubelet/pki/kubelet.key\n"})}),"\n",(0,i.jsx)(t.p,{children:"Or via command line:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"kubelet \\\n  --tls-cert-file=/var/lib/kubelet/pki/kubelet.crt \\\n  --tls-private-key-file=/var/lib/kubelet/pki/kubelet.key \\\n  --client-ca-file=/etc/kubernetes/pki/ca.crt\n"})}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h2,{id:"3-disable-read-only-port",children:"3. Disable Read-Only Port"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Issue:"})," The kubelet read-only port (10255) exposes information without authentication.",(0,i.jsx)("br",{}),"\n",(0,i.jsx)(t.strong,{children:"Fix:"})," Disable the read-only port entirely."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-yaml",children:"apiVersion: kubelet.config.k8s.io/v1beta1\nkind: KubeletConfiguration\nreadOnlyPort: 0\n"})}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h2,{id:"4-limit-resource-consumption",children:"4. Limit Resource Consumption"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Issue:"})," Unrestricted Kubelet resource usage can lead to resource exhaustion attacks.",(0,i.jsx)("br",{}),"\n",(0,i.jsx)(t.strong,{children:"Fix:"})," Reserve resources for system components."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-yaml",children:'apiVersion: kubelet.config.k8s.io/v1beta1\nkind: KubeletConfiguration\nkubeReserved:\n  cpu: "200m"\n  memory: "512Mi"\n  ephemeral-storage: "1Gi"\nsystemReserved:\n  cpu: "100m"\n  memory: "256Mi"\n  ephemeral-storage: "1Gi"\nevictionHard:\n  memory.available: "100Mi"\n  nodefs.available: "10%"\n'})}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h2,{id:"5-enable-protect-kernel-defaults",children:"5. Enable Protect Kernel Defaults"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Issue:"})," The kubelet may modify kernel parameters that weaken node security.",(0,i.jsx)("br",{}),"\n",(0,i.jsx)(t.strong,{children:"Fix:"})," Enable protection of kernel defaults."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-yaml",children:"apiVersion: kubelet.config.k8s.io/v1beta1\nkind: KubeletConfiguration\nprotectKernelDefaults: true\n"})}),"\n",(0,i.jsx)(t.p,{children:"This ensures the kubelet fails to start if required kernel parameters are not set correctly."}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h2,{id:"6-rotate-certificates-automatically",children:"6. Rotate Certificates Automatically"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Issue:"})," Long-lived certificates increase risk if compromised.",(0,i.jsx)("br",{}),"\n",(0,i.jsx)(t.strong,{children:"Fix:"})," Enable automatic certificate rotation."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-yaml",children:"apiVersion: kubelet.config.k8s.io/v1beta1\nkind: KubeletConfiguration\nrotateCertificates: true\nserverTLSBootstrap: true\n"})}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h2,{id:"7-regularly-update-and-patch",children:"7. Regularly Update and Patch"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Issue:"})," Older versions of the Kubelet may have known vulnerabilities.",(0,i.jsx)("br",{}),"\n",(0,i.jsx)(t.strong,{children:"Fix:"})," Always use the latest stable version and apply security patches."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"# Check the current Kubelet version\nkubelet --version\n\n# On managed Kubernetes, check node versions\nkubectl get nodes -o wide\n"})}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h2,{id:"security-checklist",children:"Security Checklist"}),"\n",(0,i.jsxs)(t.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(t.li,{className:"task-list-item",children:[(0,i.jsx)(t.input,{type:"checkbox",disabled:!0})," ","Anonymous authentication disabled"]}),"\n",(0,i.jsxs)(t.li,{className:"task-list-item",children:[(0,i.jsx)(t.input,{type:"checkbox",disabled:!0})," ","Webhook authorization enabled"]}),"\n",(0,i.jsxs)(t.li,{className:"task-list-item",children:[(0,i.jsx)(t.input,{type:"checkbox",disabled:!0})," ","TLS encryption configured"]}),"\n",(0,i.jsxs)(t.li,{className:"task-list-item",children:[(0,i.jsx)(t.input,{type:"checkbox",disabled:!0})," ","Read-only port disabled (port 10255)"]}),"\n",(0,i.jsxs)(t.li,{className:"task-list-item",children:[(0,i.jsx)(t.input,{type:"checkbox",disabled:!0})," ","Resource reservations configured"]}),"\n",(0,i.jsxs)(t.li,{className:"task-list-item",children:[(0,i.jsx)(t.input,{type:"checkbox",disabled:!0})," ","Certificate rotation enabled"]}),"\n",(0,i.jsxs)(t.li,{className:"task-list-item",children:[(0,i.jsx)(t.input,{type:"checkbox",disabled:!0})," ","Kernel defaults protected"]}),"\n",(0,i.jsxs)(t.li,{className:"task-list-item",children:[(0,i.jsx)(t.input,{type:"checkbox",disabled:!0})," ","Kubelet version up to date"]}),"\n"]}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h2,{id:"references",children:"References"}),"\n",(0,i.jsx)(t.p,{children:"This article is based on information from the following official sources:"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.a,{href:"https://kubernetes.io/docs/reference/access-authn-authz/kubelet-authn-authz/",children:"Kubelet Authentication/Authorization"})," - Kubernetes Documentation"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.a,{href:"https://kubernetes.io/docs/reference/config-api/kubelet-config.v1beta1/",children:"Kubelet Configuration"})," - Kubernetes Documentation"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.a,{href:"https://www.cisecurity.org/benchmark/kubernetes",children:"CIS Kubernetes Benchmark"})," - Center for Internet Security"]}),"\n"]})]})}function d(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}},8453(e,t,n){n.d(t,{R:()=>a,x:()=>c});var s=n(6540);const i={},r=s.createContext(i);function a(e){const t=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);
"use strict";(globalThis.webpackChunkk_8_s_security=globalThis.webpackChunkk_8_s_security||[]).push([[2322],{8453(e,n,s){s.d(n,{R:()=>a,x:()=>o});var i=s(6540);const t={},r=i.createContext(t);function a(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),i.createElement(r.Provider,{value:n},e.children)}},9488(e,n,s){s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"best-practices/supply-chain-security/kbom","title":"KBOM","description":"KBOM (Kubernetes Bill of Materials) Toolkit generates comprehensive inventories of Kubernetes clusters, including components, images, and configurations.","source":"@site/docs/best-practices/supply-chain-security/kbom.md","sourceDirName":"best-practices/supply-chain-security","slug":"/best-practices/supply-chain-security/kbom","permalink":"/kubernetes-security/best-practices/supply-chain-security/kbom","draft":false,"unlisted":false,"editUrl":"https://github.com/geek-kb/k8s_security/edit/main/docs/best-practices/supply-chain-security/kbom.md","tags":[{"inline":true,"label":"tool","permalink":"/kubernetes-security/tags/tool"},{"inline":true,"label":"supply-chain","permalink":"/kubernetes-security/tags/supply-chain"},{"inline":true,"label":"inventory","permalink":"/kubernetes-security/tags/inventory"},{"inline":true,"label":"CKS","permalink":"/kubernetes-security/tags/cks"}],"version":"current","lastUpdatedBy":"Itai Ganot","lastUpdatedAt":1771236448000,"sidebarPosition":8,"frontMatter":{"sidebar_position":8,"title":"KBOM","description":"KBOM (Kubernetes Bill of Materials) Toolkit generates comprehensive inventories of Kubernetes clusters, including components, images, and configurations.","keywords":["kubernetes security tool","KBOM","kubernetes bill of materials","inventory","cluster components","supply chain security","SBOM","asset management","CKS"],"tags":["tool","supply-chain","inventory","CKS"],"related":["/kubernetes-security/best-practices/supply-chain-security/sbom/","/kubernetes-security/best-practices/supply-chain-security/syft/","/kubernetes-security/best-practices/supply-chain-security/supply-chain-best-practices/"]},"sidebar":"default","previous":{"title":"Understanding SBOM","permalink":"/kubernetes-security/best-practices/supply-chain-security/sbom"},"next":{"title":"Kubei","permalink":"/kubernetes-security/best-practices/supply-chain-security/kubei"}}');var t=s(4848),r=s(8453);const a={sidebar_position:8,title:"KBOM",description:"KBOM (Kubernetes Bill of Materials) Toolkit generates comprehensive inventories of Kubernetes clusters, including components, images, and configurations.",keywords:["kubernetes security tool","KBOM","kubernetes bill of materials","inventory","cluster components","supply chain security","SBOM","asset management","CKS"],tags:["tool","supply-chain","inventory","CKS"],related:["/kubernetes-security/best-practices/supply-chain-security/sbom/","/kubernetes-security/best-practices/supply-chain-security/syft/","/kubernetes-security/best-practices/supply-chain-security/supply-chain-best-practices/"]},o="KBOM",l={},c=[{value:"Use Cases",id:"use-cases",level:2},{value:"Installation",id:"installation",level:2},{value:"Using kubectl krew",id:"using-kubectl-krew",level:3},{value:"Using Go",id:"using-go",level:3},{value:"From GitHub Releases",id:"from-github-releases",level:3},{value:"Usage Examples",id:"usage-examples",level:2},{value:"Generate Cluster KBOM",id:"generate-cluster-kbom",level:3},{value:"Output as JSON",id:"output-as-json",level:3},{value:"Output as YAML",id:"output-as-yaml",level:3},{value:"Generate for Specific Namespace",id:"generate-for-specific-namespace",level:3},{value:"Generate CycloneDX SBOM Format",id:"generate-cyclonedx-sbom-format",level:3},{value:"Generate SPDX Format",id:"generate-spdx-format",level:3},{value:"KBOM Components",id:"kbom-components",level:2},{value:"Cluster Information",id:"cluster-information",level:3},{value:"Control Plane Components",id:"control-plane-components",level:3},{value:"Node Components",id:"node-components",level:3},{value:"Workload Images",id:"workload-images",level:3},{value:"Example Output (JSON)",id:"example-output-json",level:2},{value:"Integration with Vulnerability Scanners",id:"integration-with-vulnerability-scanners",level:2},{value:"Combine with Trivy",id:"combine-with-trivy",level:3},{value:"Combine with Grype",id:"combine-with-grype",level:3},{value:"CI/CD Integration",id:"cicd-integration",level:2},{value:"GitHub Actions",id:"github-actions",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Comparing KBOMs",id:"comparing-kboms",level:2},{value:"References",id:"references",level:2}];function u(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"kbom",children:"KBOM"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"KBOM"})," (Kubernetes Bill of Materials) is a toolkit that generates comprehensive inventories of Kubernetes clusters. It produces a detailed manifest of all cluster components including control plane versions, container images, operators, and configurations. This inventory is essential for supply chain security, vulnerability management, and compliance."]}),"\n",(0,t.jsx)(n.p,{children:'KBOM helps answer questions like "What versions are running in my cluster?" and "Which images are deployed across all namespaces?"'}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"use-cases",children:"Use Cases"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Generate an inventory of all container images in a cluster."}),"\n",(0,t.jsx)(n.li,{children:"Track Kubernetes component versions for vulnerability management."}),"\n",(0,t.jsx)(n.li,{children:"Create compliance documentation for audits."}),"\n",(0,t.jsx)(n.li,{children:"Identify outdated or vulnerable components."}),"\n",(0,t.jsx)(n.li,{children:"Support incident response by providing a snapshot of cluster state."}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,t.jsx)(n.h3,{id:"using-kubectl-krew",children:"Using kubectl krew"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"kubectl krew install kbom\n"})}),"\n",(0,t.jsx)(n.h3,{id:"using-go",children:"Using Go"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"go install github.com/ksoclabs/kbom@latest\n"})}),"\n",(0,t.jsx)(n.h3,{id:"from-github-releases",children:"From GitHub Releases"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"curl -LO https://github.com/ksoclabs/kbom/releases/download/v0.3.0/kbom_linux_amd64.tar.gz\ntar xzf kbom_linux_amd64.tar.gz\nchmod +x kbom\nsudo mv kbom /usr/local/bin/\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"usage-examples",children:"Usage Examples"}),"\n",(0,t.jsx)(n.h3,{id:"generate-cluster-kbom",children:"Generate Cluster KBOM"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"kubectl kbom generate\n"})}),"\n",(0,t.jsx)(n.h3,{id:"output-as-json",children:"Output as JSON"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"kubectl kbom generate -o json > kbom.json\n"})}),"\n",(0,t.jsx)(n.h3,{id:"output-as-yaml",children:"Output as YAML"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"kubectl kbom generate -o yaml > kbom.yaml\n"})}),"\n",(0,t.jsx)(n.h3,{id:"generate-for-specific-namespace",children:"Generate for Specific Namespace"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"kubectl kbom generate -n production\n"})}),"\n",(0,t.jsx)(n.h3,{id:"generate-cyclonedx-sbom-format",children:"Generate CycloneDX SBOM Format"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"kubectl kbom generate -o cyclonedx > cluster-sbom.json\n"})}),"\n",(0,t.jsx)(n.h3,{id:"generate-spdx-format",children:"Generate SPDX Format"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"kubectl kbom generate -o spdx > cluster-sbom.spdx\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"kbom-components",children:"KBOM Components"}),"\n",(0,t.jsx)(n.h3,{id:"cluster-information",children:"Cluster Information"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"cluster:\n  name: production-cluster\n  version: v1.28.4\n  platform: eks\n  region: us-west-2\n  nodes: 10\n"})}),"\n",(0,t.jsx)(n.h3,{id:"control-plane-components",children:"Control Plane Components"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"controlPlane:\n  apiServer:\n    version: v1.28.4\n    image: registry.k8s.io/kube-apiserver:v1.28.4\n  controllerManager:\n    version: v1.28.4\n    image: registry.k8s.io/kube-controller-manager:v1.28.4\n  scheduler:\n    version: v1.28.4\n    image: registry.k8s.io/kube-scheduler:v1.28.4\n  etcd:\n    version: 3.5.9\n"})}),"\n",(0,t.jsx)(n.h3,{id:"node-components",children:"Node Components"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"nodes:\n  - name: node-1\n    kubeletVersion: v1.28.4\n    containerRuntime: containerd://1.7.2\n    osImage: Amazon Linux 2\n    kernelVersion: 5.10.192-183.736.amzn2.x86_64\n"})}),"\n",(0,t.jsx)(n.h3,{id:"workload-images",children:"Workload Images"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"images:\n  - repository: nginx\n    tag: 1.25.3\n    digest: sha256:abc123...\n    namespaces: [production, staging]\n    pods: 15\n  - repository: redis\n    tag: 7.2.3\n    digest: sha256:def456...\n    namespaces: [production]\n    pods: 3\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"example-output-json",children:"Example Output (JSON)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "metadata": {\n    "generatedAt": "2024-01-15T10:30:00Z",\n    "generator": "kbom",\n    "version": "0.3.0"\n  },\n  "cluster": {\n    "name": "production",\n    "version": "v1.28.4",\n    "nodeCount": 10\n  },\n  "components": [\n    {\n      "type": "container-image",\n      "name": "nginx",\n      "version": "1.25.3",\n      "digest": "sha256:abc123def456...",\n      "vulnerabilities": {\n        "critical": 0,\n        "high": 2,\n        "medium": 5\n      }\n    }\n  ],\n  "addons": [\n    {\n      "name": "coredns",\n      "version": "v1.10.1",\n      "namespace": "kube-system"\n    },\n    {\n      "name": "metrics-server",\n      "version": "v0.6.4",\n      "namespace": "kube-system"\n    }\n  ]\n}\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"integration-with-vulnerability-scanners",children:"Integration with Vulnerability Scanners"}),"\n",(0,t.jsx)(n.h3,{id:"combine-with-trivy",children:"Combine with Trivy"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Generate KBOM\nkubectl kbom generate -o cyclonedx > kbom.json\n\n# Scan KBOM with Trivy\ntrivy sbom kbom.json\n"})}),"\n",(0,t.jsx)(n.h3,{id:"combine-with-grype",children:"Combine with Grype"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Generate KBOM in CycloneDX format\nkubectl kbom generate -o cyclonedx > kbom.json\n\n# Scan with Grype\ngrype sbom:kbom.json\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"cicd-integration",children:"CI/CD Integration"}),"\n",(0,t.jsx)(n.h3,{id:"github-actions",children:"GitHub Actions"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"name: Cluster Inventory\non:\n  schedule:\n    - cron: '0 0 * * *'  # Daily\n\njobs:\n  generate-kbom:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Configure kubeconfig\n        run: |\n          echo \"${{ secrets.KUBECONFIG }}\" > ~/.kube/config\n          \n      - name: Install KBOM\n        run: |\n          curl -LO https://github.com/ksoclabs/kbom/releases/latest/download/kbom_linux_amd64.tar.gz\n          tar xzf kbom_linux_amd64.tar.gz\n          chmod +x kbom\n          \n      - name: Generate KBOM\n        run: ./kbom generate -o json > kbom.json\n        \n      - name: Upload KBOM\n        uses: actions/upload-artifact@v3\n        with:\n          name: cluster-kbom\n          path: kbom.json\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Generate regularly:"})," Create KBOMs on a schedule to track changes over time."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Store in version control:"})," Keep KBOM snapshots for historical reference and diff analysis."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Integrate with scanning:"})," Use KBOM output as input for vulnerability scanners."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Include in compliance reports:"})," KBOM provides evidence of component inventory for audits."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Compare across environments:"})," Diff KBOMs between staging and production to ensure consistency."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"comparing-kboms",children:"Comparing KBOMs"}),"\n",(0,t.jsx)(n.p,{children:"Identify drift between environments or time periods:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Generate KBOM at two points in time\nkubectl kbom generate -o json > kbom-before.json\n# ... make changes ...\nkubectl kbom generate -o json > kbom-after.json\n\n# Compare using jq\ndiff <(jq -S . kbom-before.json) <(jq -S . kbom-after.json)\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,t.jsx)(n.p,{children:"This article is based on information from the following official sources:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/ksoclabs/kbom",children:"KBOM GitHub Repository"})," - KSOC Labs"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://cyclonedx.org/specification/overview/",children:"CycloneDX Specification"})," - OWASP"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://spdx.dev/specifications/",children:"SPDX Specification"})," - Linux Foundation"]}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}}}]);
"use strict";(self.webpackChunkk_8_s_security=self.webpackChunkk_8_s_security||[]).push([[5682],{6475:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>u,frontMatter:()=>l,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"best_practices/cluster_setup_and_hardening/network_security/cilium","title":"Cilium","description":"Cilium is an eBPF-powered Kubernetes networking, security, and observability solution that enables high-performance and fine-grained control over cluster communications.","source":"@site/docs/best_practices/cluster_setup_and_hardening/network_security/cilium.md","sourceDirName":"best_practices/cluster_setup_and_hardening/network_security","slug":"/best_practices/cluster_setup_and_hardening/network_security/cilium","permalink":"/docs/best_practices/cluster_setup_and_hardening/network_security/cilium","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedBy":"Itai Ganot","lastUpdatedAt":1742842158000,"sidebarPosition":11,"frontMatter":{"title":"Cilium","description":"Cilium is an eBPF-powered Kubernetes networking, security, and observability solution that enables high-performance and fine-grained control over cluster communications.","sidebar_position":11}}');var r=i(4848),t=i(8453);const l={title:"Cilium",description:"Cilium is an eBPF-powered Kubernetes networking, security, and observability solution that enables high-performance and fine-grained control over cluster communications.",sidebar_position:11},c="Cilium",a={},o=[{value:"Usage",id:"usage",level:2},{value:"1. Install Cilium",id:"1-install-cilium",level:3},{value:"2. Define Network Policies with Cilium",id:"2-define-network-policies-with-cilium",level:3},{value:"3. Enable Transparent Encryption",id:"3-enable-transparent-encryption",level:3},{value:"4. Observe Network Flows",id:"4-observe-network-flows",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Resources",id:"resources",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"cilium",children:"Cilium"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Required knowledge for the CKS certification."})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Cilium"})," is an advanced ",(0,r.jsx)(n.strong,{children:"networking, security, and observability"})," platform for Kubernetes that leverages ",(0,r.jsx)(n.strong,{children:"eBPF"})," (Extended Berkeley Packet Filter) to provide ",(0,r.jsx)(n.strong,{children:"high-performance networking"}),", ",(0,r.jsx)(n.strong,{children:"transparent encryption"}),", ",(0,r.jsx)(n.strong,{children:"network policies"}),", and ",(0,r.jsx)(n.strong,{children:"deep visibility"})," into traffic flows."]}),"\n",(0,r.jsx)(n.p,{children:"It replaces traditional kube-proxy, CNI plugins, and service meshes with a modern, programmable data plane that integrates tightly with Kubernetes."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,r.jsx)(n.h3,{id:"1-install-cilium",children:"1. Install Cilium"}),"\n",(0,r.jsx)(n.p,{children:"Use the Cilium CLI to install it into your cluster:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cilium install\n"})}),"\n",(0,r.jsx)(n.p,{children:"Check Cilium status:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cilium status\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"2-define-network-policies-with-cilium",children:"2. Define Network Policies with Cilium"}),"\n",(0,r.jsx)(n.p,{children:"Example: Allow only frontend pods to access the backend."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"apiVersion: cilium.io/v2\nkind: CiliumNetworkPolicy\nmetadata:\n  name: allow-frontend\nspec:\n  endpointSelector:\n    matchLabels:\n      app: backend\n  ingress:\n    - fromEndpoints:\n        - matchLabels:\n            app: frontend\n"})}),"\n",(0,r.jsx)(n.p,{children:"Apply the policy:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kubectl apply -f allow-frontend.yaml\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"3-enable-transparent-encryption",children:"3. Enable Transparent Encryption"}),"\n",(0,r.jsx)(n.p,{children:"Enable encryption between nodes using WireGuard or IPsec:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cilium config set enable-ipsec true\n"})}),"\n",(0,r.jsx)(n.p,{children:"Or using Helm:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"helm upgrade cilium cilium/cilium --set encryption.enabled=true\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"4-observe-network-flows",children:"4. Observe Network Flows"}),"\n",(0,r.jsx)(n.p,{children:"Use Hubble, Cilium's observability engine:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cilium hubble enable\ncilium hubble ui\n"})}),"\n",(0,r.jsx)(n.p,{children:"You can visualize:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Service-to-service communication"}),"\n",(0,r.jsx)(n.li,{children:"DNS queries"}),"\n",(0,r.jsx)(n.li,{children:"Allowed/denied flows"}),"\n",(0,r.jsx)(n.li,{children:"Identity and label-based flows"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Replace ",(0,r.jsx)(n.strong,{children:"kube-proxy"})," with Cilium to simplify architecture and reduce latency."]}),"\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.strong,{children:"identity-aware network policies"})," for more granular control than standard Kubernetes ",(0,r.jsx)(n.code,{children:"NetworkPolicy"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Enable ",(0,r.jsx)(n.strong,{children:"Hubble"})," to monitor and audit all traffic and security events."]}),"\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.strong,{children:"transparent encryption"})," to secure node-to-node traffic with zero changes to workloads."]}),"\n",(0,r.jsx)(n.li,{children:"Regularly test your policies using Cilium\u2019s connectivity test suite."}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"resources",children:"Resources"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Official Documentation:"})," ",(0,r.jsx)(n.a,{href:"https://docs.cilium.io",children:"https://docs.cilium.io"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cilium GitHub Repository:"})," ",(0,r.jsx)(n.a,{href:"https://github.com/cilium/cilium",children:"https://github.com/cilium/cilium"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Policy Examples:"})," ",(0,r.jsx)(n.a,{href:"https://docs.cilium.io/en/stable/policy/language/",children:"https://docs.cilium.io/en/stable/policy/language/"})]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>c});var s=i(6540);const r={},t=s.createContext(r);function l(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);
"use strict";(self.webpackChunkk_8_s_security=self.webpackChunkk_8_s_security||[]).push([[508],{8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>t});var i=s(6540);const o={},c=i.createContext(o);function r(e){const n=i.useContext(c);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(c.Provider,{value:n},e.children)}},9942:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>p,frontMatter:()=>r,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"best_practices/cluster_setup_and_hardening/network_security/calico","title":"Calico","description":"Calico is a networking and network security solution for Kubernetes that provides highly scalable, policy-driven networking and workload isolation.","source":"@site/docs/best_practices/cluster_setup_and_hardening/network_security/calico.md","sourceDirName":"best_practices/cluster_setup_and_hardening/network_security","slug":"/best_practices/cluster_setup_and_hardening/network_security/calico","permalink":"/docs/best_practices/cluster_setup_and_hardening/network_security/calico","draft":false,"unlisted":false,"editUrl":"https://github.com/geek-kb/k8s_security/edit/main/docs/best_practices/cluster_setup_and_hardening/network_security/calico.md","tags":[],"version":"current","lastUpdatedBy":"Itai Ganot","lastUpdatedAt":1742842158000,"sidebarPosition":12,"frontMatter":{"title":"Calico","description":"Calico is a networking and network security solution for Kubernetes that provides highly scalable, policy-driven networking and workload isolation.","sidebar_position":12}}');var o=s(4848),c=s(8453);const r={title:"Calico",description:"Calico is a networking and network security solution for Kubernetes that provides highly scalable, policy-driven networking and workload isolation.",sidebar_position:12},t="Calico",l={},a=[{value:"Usage",id:"usage",level:2},{value:"1. Install Calico in Kubernetes",id:"1-install-calico-in-kubernetes",level:3},{value:"2. Define Kubernetes Network Policies",id:"2-define-kubernetes-network-policies",level:3},{value:"3. Use Calico Global Network Policies",id:"3-use-calico-global-network-policies",level:3},{value:"4. Monitor and Debug Policies",id:"4-monitor-and-debug-policies",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Resources",id:"resources",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"calico",children:"Calico"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Required knowledge for the CKS certification."})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Calico"})," is an open-source ",(0,o.jsx)(n.strong,{children:"networking and security"})," solution for containers, virtual machines, and native host-based workloads. In Kubernetes environments, Calico provides ",(0,o.jsx)(n.strong,{children:"high-performance, scalable networking"})," along with ",(0,o.jsx)(n.strong,{children:"fine-grained network security policies"})," for workloads running across nodes."]}),"\n",(0,o.jsxs)(n.p,{children:["Calico supports both ",(0,o.jsx)(n.strong,{children:"Kubernetes NetworkPolicy"})," and its own ",(0,o.jsx)(n.strong,{children:"Calico-specific extensions"})," that provide more advanced capabilities like GlobalNetworkPolicy, DNS policy, and FQDN-based rules."]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,o.jsx)(n.h3,{id:"1-install-calico-in-kubernetes",children:"1. Install Calico in Kubernetes"}),"\n",(0,o.jsx)(n.p,{children:"Install using the official manifests:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"kubectl apply -f https://raw.githubusercontent.com/projectcalico/calico/v3.27.0/manifests/calico.yaml\n"})}),"\n",(0,o.jsx)(n.p,{children:"Or using Helm:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"helm repo add projectcalico https://projectcalico.docs.tigera.io/charts\nhelm install calico projectcalico/tigera-operator --namespace tigera-operator --create-namespace\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h3,{id:"2-define-kubernetes-network-policies",children:"2. Define Kubernetes Network Policies"}),"\n",(0,o.jsxs)(n.p,{children:["Example: Deny all ingress traffic to pods in the ",(0,o.jsx)(n.code,{children:"production"})," namespace:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"apiVersion: networking.k8s.io/v1\nkind: NetworkPolicy\nmetadata:\n  name: deny-all-ingress\n  namespace: production\nspec:\n  podSelector: {}\n  policyTypes:\n    - Ingress\n"})}),"\n",(0,o.jsx)(n.p,{children:"Apply it:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"kubectl apply -f deny-all-ingress.yaml\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h3,{id:"3-use-calico-global-network-policies",children:"3. Use Calico Global Network Policies"}),"\n",(0,o.jsxs)(n.p,{children:["Calico allows defining policies that apply ",(0,o.jsx)(n.strong,{children:"across namespaces"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"apiVersion: projectcalico.org/v3\nkind: GlobalNetworkPolicy\nmetadata:\n  name: allow-dns\nspec:\n  selector: all()\n  ingress:\n    - action: Allow\n      protocol: UDP\n      destination:\n        ports:\n          - 53\n  egress:\n    - action: Allow\n      protocol: UDP\n      destination:\n        ports:\n          - 53\n  types:\n    - Ingress\n    - Egress\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h3,{id:"4-monitor-and-debug-policies",children:"4. Monitor and Debug Policies"}),"\n",(0,o.jsxs)(n.p,{children:["Use ",(0,o.jsx)(n.code,{children:"calicoctl"})," to view and manage Calico-specific resources:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"calicoctl get globalnetworkpolicies\ncalicoctl get networkpolicies -n default\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Calico also supports ",(0,o.jsx)(n.strong,{children:"flow logs"}),", ",(0,o.jsx)(n.strong,{children:"IP sets"}),", and ",(0,o.jsx)(n.strong,{children:"policy enforcement metrics"}),"."]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Use GlobalNetworkPolicy"})," for consistent policy enforcement across namespaces."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Deny by default"}),", and only allow required traffic."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Integrate with eBPF mode"})," for better performance on large clusters."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Enable Calico\u2019s DNS policy support"})," to control access to external services."]}),"\n",(0,o.jsxs)(n.li,{children:["Regularly audit and test policies using ",(0,o.jsx)(n.code,{children:"calicoctl"})," or compatible CI tools."]}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"resources",children:"Resources"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Official Documentation:"})," ",(0,o.jsx)(n.a,{href:"https://projectcalico.docs.tigera.io",children:"https://projectcalico.docs.tigera.io"})]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"GitHub Repository:"})," ",(0,o.jsx)(n.a,{href:"https://github.com/projectcalico/calico",children:"https://github.com/projectcalico/calico"})]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Network Policy Tutorial:"})," ",(0,o.jsx)(n.a,{href:"https://projectcalico.docs.tigera.io/security/kubernetes-network-policy",children:"https://projectcalico.docs.tigera.io/security/kubernetes-network-policy"})]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}}}]);